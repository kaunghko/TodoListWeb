<!DOCTYPE html> 
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>My Todo List</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <script src="script.js"></script>
        
        <div class="container">
            <h1>My Todo List</h1>

            <!-- input section -->
            <div class="input-section">
                <input type="text" id="todoInput" placeholder="Enter a task...">
                <button id="addBtn">Add Task</button>
            </div>

            <div id="todoList">
                <div class="empty-message">No tasks yet!</div>
            </div>
        </div>

        <script>
            const todoInput = document.getElementById('todoInput');
            const addBtn = document.getElementById('addBtn');
            const todoList = document.getElementById('todoList');

            let tasks = [];

            loadTasks();

            addBtn.addEventListener('click', addTask);

            todoInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    addTask();
                }
            });

            function loadTasks() {
                const savedTasks = localStorage.getItem('todoTasks');
                if (savedTasks) {
                    tasks = JSON.parse(savedTasks);
                    displayAllTasks();
                }
            }

            function saveTasks() {
                localStorage.setItem('todoTasks', JSON.stringify(tasks));
            }

            function displayAllTasks() {
                todoList.innerHTML = '';

                tasks.forEach(function(task, index) {
                    createTaskElement(task, index);
                })
            }

            function addTask() {
                const taskText = todoInput.value;

                if (taskText.trim() === '') {
                    alert('Please enter a task!');
                    return;
                }

                const newTask = {
                    text: taskText,
                    completed: false
                };
                
                // add to tasks array
                tasks.push(newTask);

                // save to local storage
                saveTasks();

                // update the display
                displayAllTasks();
            
                // clear input box
                todoInput.value = '';
            }

            function createTaskElement(task, index) {
                // division for task
                const taskItem = document.createElement('div');
                taskItem.className = 'task-item';

                // create left wrapper for checkbox and task text
                const taskLeft = document.createElement('div');
                taskLeft.className = 'task-left';

                // checkbox
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'task-checkbox';
                checkbox.checked = task.completed;

                // task text
                const taskTextElement = document.createElement('span');
                taskTextElement.textContent = task.text;
                if (task.completed)
                    taskTextElement.classList.add('completed');

                // delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.className = 'delete-btn';

                checkbox.addEventListener('change', function(){
                    task.completed = checkbox.checked;
                    if(checkbox.checked)
                        taskTextElement.classList.add('completed');
                    else    
                        taskTextElement.classList.remove('completed');
                    saveTasks();
                })

                deleteBtn.addEventListener('click', function() {
                    tasks.splice(index, 1);
                    saveTasks();
                    displayAllTasks();
                });

                // add checkbox and task text to left wrapper
                taskLeft.appendChild(checkbox);
                taskLeft.appendChild(taskTextElement);

                // add left wrapper and delete button to task item
                taskItem.appendChild(taskLeft);
                taskItem.appendChild(deleteBtn);

                // add task to list
                todoList.appendChild(taskItem);
            }
        </script>
    </body>
</html>

<!-- continue on step 10-->